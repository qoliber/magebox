; MageBox Isolated PHP-FPM Master Configuration
; Project: {{.ProjectName}}
; PHP Version: {{.PHPVersion}}
; Generated by: magebox php isolate
;
; This is a DEDICATED PHP-FPM master process for this project only.
; PHP_INI_SYSTEM settings (opcache, JIT, preload) are isolated from other projects.

[global]
pid = {{.PIDPath}}
error_log = {{.ErrorLogPath}}
daemonize = yes

; ============================================
; PHP_INI_SYSTEM Settings (Isolated per-master)
; These settings apply to ALL pools under this master
; ============================================
{{range $key, $value := .SystemSettings}}
php_admin_value[{{$key}}] = {{$value}}
{{end}}

; ============================================
; Pool Configuration
; ============================================
[{{.ProjectName}}]

user = {{.User}}
group = {{.Group}}

listen = {{.SocketPath}}
listen.owner = {{.User}}
listen.group = {{.Group}}
listen.mode = 0660

pm = dynamic
pm.max_children = {{.MaxChildren}}
pm.start_servers = {{.StartServers}}
pm.min_spare_servers = {{.MinSpareServers}}
pm.max_spare_servers = {{.MaxSpareServers}}
pm.max_requests = {{.MaxRequests}}

catch_workers_output = yes
decorate_workers_output = no

; Pool-level PHP settings (PHP_INI_PERDIR)
{{range $key, $value := .PoolSettings}}
php_admin_value[{{$key}}] = {{$value}}
{{end}}

; Environment variables
{{range $key, $value := .Env}}
env[{{$key}}] = {{$value}}
{{end}}
